<!DOCTYPE html>
<html>
<body>

<form id="file-form" action="/upload" method="post" enctype="multipart/form-data">
    Select image to upload:
    <input type="file" name="fileToUpload" id="fileToUpload">
    <input type="submit" value="Upload Image" name="submit" id="submit">
    <div id="results"></div>
</form>

<script>
var form = document.getElementById('file-form');
var fileSelect = document.getElementById('fileToUpload');
var uploadButton = document.getElementById('submit');

var results = document.getElementById("results");

form.onsubmit = function(event) {
    console.log("hi");
    event.preventDefault();

    uploadButton.innerHTML = 'Uploading...';

    var file = fileSelect.files[0];
    var formData = new FormData();

    formData.append('file',file);

    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/upload', true);

    xhr.onload = function () {
    if (xhr.status === 200) {
        // File(s) uploaded.
        uploadButton.innerHTML = 'Upload';
        console.log(xhr.response);
        var res = document.createElement("p");
        var text = document.createTextNode(xhr.response);
        res.appendChild(text);

        results.appendChild(res);
        
    } else {
        alert("Error uploading image!");
    }

    
    };

    xhr.send(formData);

    
}

</script>

</body>
</html>